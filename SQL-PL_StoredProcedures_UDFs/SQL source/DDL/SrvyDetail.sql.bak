--If recreating this table, need to reset seq# which will be highest seq# from existing data
ALTER TABLE VGFILES/SRVYDETAIL
DROP UNIQUE VGFILES/SRVYDETAIL_UNQSEQ RESTRICT;

DROP TABLE VGFILES/SRVYDETAIL;

CREATE TABLE VGFILES/SRVYDETAIL (
	SL_SEQUENCE INTEGER GENERATED ALWAYS AS IDENTITY (
 	START WITH 21099 INCREMENT BY 1      -- reset this sequence to match next valid#
	NO MINVALUE NO MAXVALUE
	NO CYCLE NO ORDER
 	CACHE 20 ),
	SL_BATCHNO FOR COLUMN SLBATCHNO DECIMAL(5, 0) DEFAULT NULL ,
	SL_RUNDATE FOR COLUMN SLRUNDATE DATE DEFAULT NULL ,
	SL_CONTACT_TYPE CHAR(2) CCSID 37 DEFAULT NULL ,
	SL_CONTACT_CODE CHAR(5) CCSID 37 DEFAULT NULL ,
	SL_CONTACT_DATE DECIMAL(8, 0) DEFAULT NULL ,
	SL_ACCTNO DECIMAL(7, 0) DEFAULT NULL ,
	SL_LASTNAME CHAR(30) CCSID 37 DEFAULT NULL ,
	SL_FIRSTNAME CHAR(20) CCSID 37 DEFAULT NULL ,
	SL_ADDRESS1 CHAR(35) CCSID 37 DEFAULT NULL ,
	SL_ADDRESS2 CHAR(35) CCSID 37 DEFAULT NULL ,
	SL_ADDRESS3 CHAR(35) CCSID 37 DEFAULT NULL ,
	SL_ZIPCODE CHAR(9) CCSID 37 DEFAULT NULL ,
	SL_MANUALENTRY FOR COLUMN MANUAL     CHAR(1) CCSID 37 DEFAULT NULL ,
 	SL_COMPOSITE_CODE FOR COLUMN COMPCODE   CHAR(50) CCSID 37 DEFAULT NULL ,
	SL_RESPONSE_DATE FOR COLUMN SLRESPDATE TIMESTAMP DEFAULT NULL , 
	SL_COMPLETED_BY FOR COLUMN SLCPB      CHAR(15) CCSID 37 DEFAULT NULL,
	SL_CSRID FOR COLUMN SLCSR  CHAR(5) CCSID 37 DEFAULT NULL) ;

ALTER TABLE VGFILES/SRVYDETAIL

	ADD CONSTRAINT VGFILES/SRVYDETAIL_UNQSEQ

	UNIQUE( SL_SEQUENCE ) ;

LABEL ON COLUMN JVALANCE/SRVYDETAIL
(   SL_SEQUENCE       IS 'Survey record       number' ,
	SL_BATCHNO        IS 'Survey              batch#' ,
	SL_RUNDATE        IS 'Date                created' ,
	SL_MANUALENTRY    IS 'Manual              entry' ,
	SL_COMPOSITE_CODE IS 'Composite           code',
	SL_RESPONSE_DATE  IS 'Response entry      date/time',
	SL_COMPLETED_BY   IS 'Completed           By'
) ;

LABEL ON COLUMN JVALANCE/SRVYDETAIL
( SL_SEQUENCE TEXT IS 'Unique sequence ID' ,
	SL_CONTACT_TYPE TEXT IS 'Contact type (CM/SO)' ,
	SL_CONTACT_CODE TEXT IS 'Contact/SO code' ,
	SL_CONTACT_DATE TEXT IS 'Date contact completed' ,
	SL_ACCTNO TEXT IS 'Account number' ,
	SL_LASTNAME TEXT IS 'Last name' ,
	SL_FIRSTNAME TEXT IS 'First name' ,
	SL_ADDRESS1 TEXT IS 'Address 1' ,
	SL_ADDRESS2 TEXT IS 'Address 2' ,
	SL_ADDRESS3 TEXT IS 'Address 3' ,
	SL_ZIPCODE TEXT IS 'Zip code' ,
	SL_BATCHNO TEXT IS 'Survey batch number' ,
	SL_RUNDATE TEXT IS 'Date record created' ,
	SL_MANUALENTRY TEXT IS 'Manually entered address?' ,
	SL_COMPOSITE_CODE TEXT IS 'Composite code',
	SL_RESPONSE_DATE TEXT IS 'Response entry date/time',
	SL_COMPLETED_BY TEXT IS 'Completed By'
) ;

